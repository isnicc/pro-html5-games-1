<!-- http://jlongster.com/Making-Sprite-based-Games-with-Canvas -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>jlongster tut</title>

    <style>
        * {
            /*padding: 0;*/
            /*margin: 0;*/
        }
        html, body {
            width: 100%;
            height: 100%;
        }
        canvas {
            border: 3px solid black;
            box-sizing: border-box;
        }
    </style>
</head>
<body>

</body>


<script>

    var canvas = document.createElement('canvas');
    var ctx = canvas.getContext('2d');
    var bbox = canvas.getBoundingClientRect();

    var last_time;  //stores the last time the frame was rendered.


    // ------------------
    // functions --------
    // ------------------
    function init_canvas() {

        canvas.width = 512;
        canvas.height = 480;
        document.body.appendChild(canvas);

        ctx.fillStyle = 'rgb(100,100,100)';
        ctx.fillRect(0,0,canvas.width, canvas.height);
    }

    // main loop
    function main() {
        var now = Date.now();
        var dt = (now - last_time) / 1000.0;    // delta time

        update(dt);                     // update scene
        render();                       // render scene

        last_time = now;                // set 'last time' to 'now' (just like current_millis in arduino)
        requestAnimationFrame(main);    // fire the loop
    }

    //
    function update(dt) {
        // track game time

        handle_input();         // [FUNCTION] handle input
        update_entities();      // [FUNCTION] update entities
        check_collisions();     // [FUNCTION] check collisions
    }

    function handle_input() {
        // check keys 'isDown' property.
    }

    function update_entities() {
        // update player sprites
        // update bullets
        // update enemy positions
        // update explosions and effects
    }

    function check_collisions() {
        check_player_bounds();      // check to make sure player is not outside of window
    }

    function check_player_bounds() {
        // check X Y, reset to boundaries of going beyond them.
    }

    // draw everything
    function render() {
        // (draw background)
        // (render entities: bullets, enemies, explosions);

        // render_entities(bullets);
        // render_entities(enemies);
        // render_entities(explosions);
    }

    function render_entities(list) {
        // loop through list of entities
    }

    function render_entity(entity) {
        // render individual
    }

    // game over state
    function game_over() {}

    // reset game to original state
    function reset() {}



    // -------------------
    // events ------------
    // -------------------

    window.addEventListener('load', function(e) {
        console.log('page loaded.');

        init_canvas();
    });

    canvas.addEventListener('click', function(e) {
        console.log((e.clientX-bbox.left) + ', ' + (e.clientY-bbox.top));
    });

</script>
</html>